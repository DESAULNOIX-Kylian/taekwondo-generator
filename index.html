<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GÃ©nÃ©rateur Taekwondo</title>
<style>
body { font-family: Arial, sans-serif; background: #f4f4f4; text-align: center; padding: 20px; }
h1 { color: #333; }
input, button { font-size: 1.1rem; padding: 10px 15px; margin: 6px; }
button { background: #2c7be5; color: white; border: none; border-radius: 10px; cursor: pointer; }
button:hover { background: #1a5dc9; }
#result { margin-top: 20px; text-align: left; display: inline-block; width: 100%; max-width: 500px; }
.card { background: white; padding: 15px; border-radius: 12px; margin-bottom: 15px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); }
img { max-width: 100%; border-radius: 10px; margin-top: 10px; display: none; }
</style>
</head>
<body>

<h1>ðŸ¥‹ GÃ©nÃ©rateur Taekwondo</h1>
<label>Poomsae maximum :</label>
<input type="number" id="poomsaeMax" min="1" max="8" value="8">
<br>
<button onclick="genererCombinaison()">ðŸŽ² Combinaison alÃ©atoire</button>
<button onclick="genererSequence()">ðŸ“š SÃ©quence (2-3 techniques)</button>
<div id="result"></div>

<script>
/* ===================== DONNÃ‰ES COMPLÃˆTES ===================== */
const data = {
"positions":[
{"id":"ap_seugui","nom":"Ap Seugui","poomsae":[1,2,3,4,7],"image":"images/position/ap_seugui.png"},
{"id":"ap_kubi","nom":"Ap Kubi","poomsae":[1,2,3,4,5,6,7,8],"image":"images/position/ap_kubi.png"},
{"id":"dwitt_kubi","nom":"Dwitt Kubi","poomsae":[3,4,5,6,7,8],"image":"images/position/dwitt_kubi.png"},
{"id":"owen_seugui","nom":"Owen Seugui","poomsae":[5],"image":"images/position/owen_seugui.png"},
{"id":"orun_seugui","nom":"Orun Seugui","poomsae":[5],"image":"images/position/orun_seugui.png"},
{"id":"dwitt_koa_seugui","nom":"Dwitt Koa Seugui","poomsae":[5,7],"image":"images/position/dwitt_koa_seugui.png"},
{"id":"naranhi_seugui","nom":"Naranhi Seugui","poomsae":[6],"image":"images/position/naranhi_seugui.png"},
{"id":"bom_seugui","nom":"Bom Seugui","poomsae":[7,8],"image":"images/position/bom_seugui.png"},
{"id":"moa_seugui","nom":"Moa Seugui","poomsae":[7],"image":"images/position/moa_seugui.png"},
{"id":"joutchoum_seugui","nom":"Joutchoum Seugui","poomsae":[7],"image":"images/position/joutchoum_seugui.png"}
],
"blocages":[
{"id":"arae_makki","nom":"Arae Makki","poomsae":[1,2,3,5,6],"image":"images/blocage/arae_makki.png"},
{"id":"montong_makki","nom":"Montong Makki","poomsae":[4,5,7,8],"image":"images/blocage/montong_makki.png"},
{"id":"montong_an_makki","nom":"Montong An Makki","poomsae":[1,2,3,4,5],"image":"images/blocage/montong_an_makki.png"},
{"id":"montong_bakkat_makki","nom":"Montong Bakkat Makki","poomsae":[4,6],"image":"images/blocage/montong_bakkat_makki.png"},
{"id":"eulgoul_makki","nom":"Eulgoul Makki","poomsae":[1,5],"image":"images/blocage/eulgoul_makki.png"},
{"id":"han_sonnal_montong_bakkat_makki","nom":"Han Sonnal Montong Bakkat Makki","poomsae":[3,5,8],"image":"images/blocage/han_sonnal_montong_bakkat_makki.png"},
{"id":"sonnal_montong_makki","nom":"Sonnal Montong Makki","poomsae":[4,6,8],"image":"images/blocage/sonnal_montong_makki.png"},
{"id":"batangson_nullo_makki","nom":"Batangson Nullo Makki","poomsae":[4],"image":"images/blocage/batangson_nullo_makki.png"},
{"id":"han_sonnal_eulgoul_pitreu_makki","nom":"Han Sonnal Eulgoul Pitreu Makki","poomsae":[6],"image":"images/blocage/han_sonnal_eulgoul_pitreu_makki.png"},
{"id":"eulgoul_bakkat_makki","nom":"Eulgoul Bakkat Makki","poomsae":[6],"image":"images/blocage/eulgoul_bakkat_makki.png"},
{"id":"arae_hechyo_makki","nom":"Arae Hechyo Makki","poomsae":[6],"image":"images/blocage/arae_hechyo_makki.png"},
{"id":"batangson_montong_makki","nom":"Batangson Montong Makki","poomsae":[6,8],"image":"images/blocage/batangson_montong_makki.png"},
{"id":"batangson_montong_an_makki","nom":"Batangson Montong An Makki","poomsae":[7],"image":"images/blocage/batangson_montong_an_makki.png"},
{"id":"sonnal_arae_makki","nom":"Sonnal Arae Makki","poomsae":[7],"image":"images/blocage/sonnal_arae_makki.png"},
{"id":"keudeuro_batangson_montong_an_makki","nom":"Keudeuro Batangson Montong An Makki","poomsae":[7],"image":"images/blocage/keudeuro_batangson_montong_an_makki.png"},
{"id":"dou_bon_kawi_makki","nom":"Dou Bon Kawi Makki","poomsae":[7],"image":"images/blocage/dou_bon_kawi_makki.png"},
{"id":"montong_bakkat_palmok_hechyo_makki","nom":"Montong Bakkat Palmok Hechyo Makki","poomsae":[7],"image":"images/blocage/montong_bakkat_palmok_hechyo_makki.png"},
{"id":"eutkeuleu_arae_makki","nom":"Eutkeuleu Arae Makki","poomsae":[7],"image":"images/blocage/eutkeuleu_arae_makki.png"},
{"id":"an_sonnal_montong_yop_makki","nom":"An Sonnal Montong Yop Makki","poomsae":[7],"image":"images/blocage/an_sonnal_montong_yop_makki.png"},
{"id":"keudeuro_montong_makki","nom":"Keudeuro Montong Makki","poomsae":[8],"image":"images/blocage/keudeuro_montong_makki.png"},
{"id":"owen_santeul_makki","nom":"Owen Santeul Makki","poomsae":[8],"image":"images/blocage/owen_santeul_makki.png"},
{"id":"orun_santeul_makki","nom":"Orun Santeul Makki","poomsae":[8],"image":"images/blocage/orun_santeul_makki.png"},
{"id":"keudeuro_arae_makki","nom":"Keudeuro Arae Makki","poomsae":[8],"image":"images/blocage/keudeuro_arae_makki.png"}
],
"coups_main":[
{"id":"montong_bandae_jileugui","nom":"Montong Bandae Jileugui","poomsae":[1,2,8],"image":"images/main/montong_bandae_jileugui.png"},
{"id":"montong_baro_jileugui","nom":"Montong Baro Jileugui","poomsae":[1,3,4,6,8],"image":"images/main/montong_baro_jileugui.png"},
{"id":"eulgoul_bandae_jileugui","nom":"Eulgoul Bandae Jileugui","poomsae":[2],"image":"images/main/eulgoul_bandae_jileugui.png"},
{"id":"eulgoul_baro_jileugui","nom":"Eulgoul Baro Jileugui","poomsae":[2],"image":"images/main/eulgoul_baro_jileugui.png"},
{"id":"montong_dou_bon_jileugui","nom":"Montong Dou Bon Jileugui","poomsae":[3,4,8],"image":"images/main/montong_dou_bon_jileugui.png"},
{"id":"pyon_sonn_keut_seo_jileugui","nom":"Pyon Sonn Keut Seo Jileugui","poomsae":[4],"image":"images/main/pyon_sonn_keut_seo_jileugui.png"},
{"id":"yop_jileugui","nom":"Yop Jileugui","poomsae":[7],"image":"images/main/yop_jileugui.png"},
{"id":"dang_kyeu_teuk_jileugui","nom":"Dang Kyeu Teuk Jileugui","poomsae":[8],"image":"images/main/dang_kyeu_teuk_jileugui.png"}
],
"coups_pied":[
{"id":"ap_tchagui","nom":"Ap Tchagui","poomsae":[1,2,3,5,6,7,8],"image":"images/pied/ap_tchagui.png"},
{"id":"bandal_tchagui","nom":"Bandal Tchagui","poomsae":[1],"image":"images/pied/bandal_tchagui.png"},
{"id":"yop_tchagui","nom":"Yop Tchagui","poomsae":[4,5],"image":"images/pied/yop_tchagui.png"},
{"id":"dollyo_tchagui","nom":"Dollyo Tchagui","poomsae":[6],"image":"images/pied/dollyo_tchagui.png"}
],
"speciaux":[
{"id":"y_oh_tchagui","nom":"Y oh Tchagui","poomsae":[8],"image":"images/autres/y_oh_tchagui.png"},
{"id":"bo_joumok","nom":"Bo Joumok","poomsae":[7],"image":"images/autres/bo_joumok.png"}
]
};

/* ===================== OUTILS ===================== */
function filtrerParPoomsae(liste,max){return liste.filter(t=>t.poomsae.some(p=>p<=max));}
function randomItem(arr){return arr[Math.floor(Math.random()*arr.length)];}

/* ===================== AFFICHAGE ===================== */
function afficher(items){
  const result=document.getElementById("result");
  result.innerHTML="";
  items.forEach((item,index)=>{
    const card=document.createElement("div");
    card.className="card";
    const posImgId=`pos_img_${index}`;
    const actImgId=`act_img_${index}`;
    card.innerHTML=`
      <strong>${index+1}. ${item.texte}</strong><br><br>
      <button onclick="toggleImage('${posImgId}', this)">Afficher l'indice position</button>
      ${item.positionImage?`<img id="${posImgId}" src="${item.positionImage}">`:''}
      <br><br>
      <button onclick="toggleImage('${actImgId}', this)">Afficher l'indice technique</button>
      ${item.actionImage?`<img id="${actImgId}" src="${item.actionImage}">`:''}
    `;
    result.appendChild(card);
  });
}

function toggleImage(id,btn){
  const img=document.getElementById(id);
  if(!img) return;
  const hidden=getComputedStyle(img).display==="none";
  img.style.display=hidden?"block":"none";
  btn.innerText=hidden?"Cacher lâ€™indice":"Afficher lâ€™indice";
}

/* ===================== GÃ‰NÃ‰RATEURS ===================== */
function genererCombinaison(){
  const max=+document.getElementById("poomsaeMax").value;
  const position=randomItem(filtrerParPoomsae(data.positions,max));
  const actions=[
    ...filtrerParPoomsae(data.blocages,max),
    ...filtrerParPoomsae(data.coups_main,max),
    ...filtrerParPoomsae(data.coups_pied,max),
    ...filtrerParPoomsae(data.speciaux,max)
  ];
  const action=randomItem(actions);
  afficher([{texte:`${position.nom} + ${action.nom}`,positionImage:position.image,actionImage:action.image}]);
}

function genererSequence(){
  const max=+document.getElementById("poomsaeMax").value;
  const longueur=Math.random()<0.5?2:3;
  const positions=filtrerParPoomsae(data.positions,max);
  const blocs=filtrerParPoomsae(data.blocages,max);
  const mains=filtrerParPoomsae(data.coups_main,max);
  const pieds=filtrerParPoomsae(data.coups_pied,max);

  const schema=longueur===2?[blocs,mains]:[blocs,mains,pieds];

  const sequence=schema.map(actions=>{
    const action=randomItem(actions);
    const position=randomItem(positions);
    return {texte:`${position.nom} + ${action.nom}`,positionImage:position.image,actionImage:action.image};
  });
  afficher(sequence);
}
</script>
</body>
</html>
